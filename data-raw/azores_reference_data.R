## code to prepare `Azores reference test files` dataset goes here

# The files generated by this script are used for reference testing. The output
# of this script was copied to tests/testthat/testdata/ so as to be accessed
# by R CHECK
array_indices <- 1:5
data(Azores, package = "relaxedDAISIE")
data(Azores_alt_m, package = "relaxedDAISIE")
models <- c("cr_dd", "cr_di")
cond <- 1

for (model in models) {
  for (array_index in array_indices) {
    run_daisie_ml(
      data = Azores,
      data_name = "Azores",
      model = model,
      array_index = array_index,
      cond = cond,
      test = TRUE
    )
    run_daisie_ml(
      data = Azores_alt_m,
      data_name = "Azores_alt_m",
      model = model,
      array_index = array_index,
      cond = cond,
      test = TRUE
    )
  }
}

sens_out <- sensitivity(
  data_names = c("Azores", "Azores_alt_m"),
  full_output = TRUE
)

saveRDS(sens_out, "results/Azores_Azores_alt_m.rds")

for (array_index in array_indices) {
  bootstrap_lr(
    data = Azores,
    data_name = "Azores",
    model_1 = "cr_dd",
    model_2 = "cr_di",
    array_index = array_index,
    cond = cond,
    test = TRUE
  )
  bootstrap(
    data = Azores,
    data_name = "Azores",
    model = "cr_dd",
    array_index = array_index,
    cond = cond,
    test = TRUE
  )
}

